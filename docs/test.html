<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>测试转义功能</title>
</head>
<body>
    <h1>测试转义功能</h1>
    <textarea id="input" style="width:100%;height:200px;">{\"id\":\"c1e7b30a-080a-495a-a2db-064e8eb8db89\",\"bidid\":\"691ade1226de3a0001adba03\",\"cur\":\"USD\",\"seatbid\":[{\"seat\":\"batambe_rtb\",\"bid\":[{\"id\":\"691ade1226de3a0001adba04\",\"impid\":\"1\",\"price\":0.01282051282051282,\"adm\":\"\\u003c!DOCTYPE html\\u003e\\n\\u003chtml\\u003e\\n\\n\\u003chead\\u003e\\n  \\u003cmeta charset=\\\"UTF-8\\\" /\\u003e\"}]}]}</textarea>
    <br><br>
    <button onclick="testUnescape()">测试转义</button>
    <br><br>
    <textarea id="output" style="width:100%;height:200px;"></textarea>

    <script>
        function testUnescape() {
            const input = document.getElementById('input').value;
            
            try {
                let unescaped = input.replace(/\\"/g, '"')
                                    .replace(/\\n/g, '\n')
                                    .replace(/\\t/g, '\t')
                                    .replace(/\\r/g, '\r')
                                    .replace(/\\u([0-9a-fA-F]{4})/g, (match, code) => {
                                        return String.fromCharCode(parseInt(code, 16));
                                    })
                                    .replace(/\\\\/g, '\\');
                
                const formatted = JSON.stringify(JSON.parse(unescaped), null, 2);
                document.getElementById('output').value = formatted;
                
            } catch (error) {
                document.getElementById('output').value = 'Error: ' + error.message;
            }
        }
    </script>
</body>
</html>
